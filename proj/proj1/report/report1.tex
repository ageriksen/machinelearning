
\documentclass[ 12pt, a4paper ]{article}

%packages
\usepackage{physics}
\usepackage{amsmath}
\usepackage{algorithm}
\usepackage{algorithmic}

\title{Ordinary least squares regression of Franke's function}
%\subtitle{subtitle here}

\author{Anders Eriksen}
\date{}

%//////////////////////
\begin{document}
%=====
%table of contents, list of figs and content
\maketitle
\tableofcontents
\listoffigures
\listoftables
%=====
\begin{abstract}
    The main summary of the work
\end{abstract}

\section{introduction}
    aims and rationale of the physics case, what you've done as well as a brief summary of 
the report \\
    o   Motivate the reader\\
    o   What done\\
    o   Structure of report\\
\section{Methods}
    Theoretical models and technicalities. \\
    o   describe methods and algorithms\\
    o   explain implementation of methods and say something about the structure of
        algorithm and present parts of code\\
    o   Plug in some calculations to test code, such as selected runs used to validate and
        verify results. Latter extremely important. Reader needs to know that your code
        reproduces selected benchmarks and reproduces previous results, either numerical 
        and/or well-known closed-form expressions. \\

The aim is to study regression models on data. These create a continuous function with which
the input data is fitted. The first, and most basic is the \textit{Ordinary Least Squares method} 
(\textit{OLS})

To test and validate the algorithms, a closed form function is an advantage. We wish to predict
terrain. there is a 2-dimensional function called \textit{Franke's function}\cite{} which can 
transform a set of coordinate vectors with values between $[0, 1]$ into height values through 
a sum of weighted exponents. 
\begin{align}
    f(x, y) \;=\; 
        &\frac{3}{4} \exp{ - \frac{(9x \,-\, 2)^2}{4}    \,-\, \frac{(9y \,-\, 2)^2}{4} }
    \nonumber \\
    +   &\frac{3}{4} \exp{ - \frac{(9x \,+\, 1)^2}{49}   \,-\, \frac{(9y \,+\, 1)  }{10} }
    \nonumber \\
    +   &\frac{1}{2} \exp{ - \frac{(9x \,-\, 7)^2}{4}    \,-\, \frac{(9y \,-\, 3)^2}{4} }
    \nonumber \\
    -   &\frac{1}{5} \exp{ -       (9x \,-\, 4)^2        \,-\,       (9y \,-\, 7)^2     }
\end{align}

To generate the data, one can create a uniformly distributed set of initial values ordered 
from low to high. These initial arrays are then combined into coordinate data through the 
numpy meshgrid function before being passed to Franke's function. These are matrices, and 
they are therefore flattened to 1D arrays through numpy's \textit{ravel()} function.

Next comes setting up the model. Firstly, constructing the model design matrix. We want a
design matrix for variable levels of model complexity, so we construct it from a polynomial
combination of the input parameters x and y. 
\begin{algorithm}
\caption{make design matrix X given input $\vec{x}, \vec{y}$ and dimension n}
\begin{algorithmic}
\STATE  create X as a matrix of ones with dimension $length(x)$ and $(int) i(i+1)/2$
\FOR{$i = 1\; \TO \; n+1$}
\STATE $q = (int) i(i+1)/2$
\FOR{$k = 0 \;\TO\; i+1 $}
\STATE $X[:\,,\,q+k] = x^{i - k} \cdot y^k $
\ENDFOR
\ENDFOR
\end{algorithmic}
\end{algorithm}

Next is to fit the model. The linear model, taken from Hastie et al\cite{}, predicts the 
value $Y$ as 
\begin{align}
    Y \,=\, X^T \, \beta.
\end{align}
$Y$ is given through the inner product of the transpose of $X$ and $\beta$.
$X$ being the design matrix mentioned above. 

One method to approximate this, is with the \textit{Residual Sum of Squares}
\begin{align}
    RSS(\beta) \,=\, \sum_{i=1}^N (y_i - x_i^T\beta)^2.\cite{}
\end{align}
As the sum of squares, there is a guaranteed minimum, though not necessarily a unique one. 
If we write this in vector notation, differentiate w.r.t $\beta$ we get the so-called 
\textit{normal equations}. 
\begin{align}
    &RSS(\beta) \,=\, ( \vec{y} \,-\, \mathbf{X}\beta )^T \, ( \vec{y} - \mathbf{X}\beta )
    \nonumber \\
    &\text{differentiating w.r.t $\beta$ gives:} \nonumber \\
    &    \mathbf{X}^T(\vec{y} \,-\, \mathbf{X}\beta) = 0 \nonumber \\
    &\text{given non-singular $\mathbf{X}^T\mathbf{X}$:} \nonumber \\
    & \hat{\beta} = \qty(\mathbf{X}^T\mathbf{X})^{-1}\mathbf{X}^T\,\vec{y}.
\end{align}

A prediction can then be made of the values $Y$ given our $\beta$ and $\mathbf{X}$ with
\begin{align}
    \hat{Y} \,&=\, \mathbf{X}\,\hat{\beta}.
\end{align}

In a naive way, this prediction can be compared to the reference output values, to see how
well the model predicts the data. Our wish, however, is to predict data of the same stochastic
"source" as our known data. As such, we could get arbitrarily like the known data by 
increasing the complexity of the polynomial we use to fit the input. This will, however cost us
generality. Any data outside the data we use to specifically fit the model is unlikely to fall 
within the model's prediction. This bias is something we need to avoid.

To this effect, we can implement a sectioning of the available data so that we can use parts of
the set to "train" our model and a separate part as a "test" or "validation".
The meethod chosen is called \textit{k-fold Cross Validation} (k-fold CV)

\section{Results}
    The results and discussion of such\\
    o   Present results \\
    o   Give critical discussion of you work \& place it in correct context\\
    o   Relate work to other calculations/studies\\
    o   Reader should be able to reproduce calculations should they wish to do so. 
        All input variables should be properly explained. \\
    o   Make sure figures and tables contain enough information in their captions. 
        Axis labels, etc. A reader should be able to get a first impression of the work
        by purely studying the figures and tables. \\
\section{Conclusion}
    Conclusions and perspectives\\
    o   State main findings and interpretations \\
    o   Try as far as possible to present perspectives for future work. \\
    o   Try to discuss the pros and cons of the methods and possible improvements. \\
\section{Appendix}
    any extra material \\
    o   Additional calculations used to validate code. \\
    o   Selected calculations. Can be listed with few comments. \\
    o   Listing of code if necessary. \\
    Consider moving parts from methods to appendix. A webpage is also an appropriate place
    for a lot of this type of info. \\\\

%bibliography
 %References
    o   Always reference material you base your work on, either scientific articles/reports
        or books. \\
    o   Refer to articles as: name(s) of author(s), journal, volume(Bold), page and year in
        parenthesis. \\
    o   Refer to bookds as: name(s) of author(s), title of book, publisher, place and year, 
        eventual page numbers. \\

\end{document}
%/////////////////////

